<html>

<head>
  <meta charset="utf-8" />
  <style type="text/css">
    *,
    *:before,
    *:after {
      box-sizing: border-box;
    }

    html {
      margin: 0;
      padding: 0;
    }

    body {
      padding: 0;
      margin: 0;
      background: #fff;
    }

    canvas {
      background: #f2f2f2;
      height: 100vh;
      width: 100vw;
      margin: 0;
      display: block;
    }
  </style>
</head>

<body>
  <canvas width="600" height="300" id="canvas"></canvas>
  <script type="text/javascript">
    const canvas = document.getElementById("canvas");

    const RPM = 10;
    const cycleTime = (60 * 1000) / RPM; // In milliseconds
    let lastTime = Date.now();
    let offsetAngle = 0;

    const circleOne = {
        x: 0,
        y: 0,
        radius: 40
      };

    const circleTwo = {
        x: 90,
        y: -30,
        radius: 60
      }
    

    function rpmToRadiansPerSecond(rpm) {
      return rpm * 2 * Math.PI / 60
    }

    const radiansPerSecond = rpmToRadiansPerSecond(RPM)

    // https://math.stackexchange.com/questions/256100/how-can-i-find-the-points-at-which-two-circles-intersect
    console.log(radiansPerSecond)

    function draw() {
      const ctx = canvas.getContext("2d");
      const now = Date.now();

      // Resize canvas to match size of body
      const bodySize = document.body.getBoundingClientRect()
      canvas.width = bodySize.width;
      canvas.height = bodySize.height;
      canvas.style.width = bodySize.width;
      canvas.style.height = bodySize.height;

      offsetAngle = (offsetAngle + ((now - lastTime) / 1000 * radiansPerSecond)) % (2 * Math.PI)

      const pX = canvas.width / 2 + Math.cos(offsetAngle) * circleOne.radius
      const pY = canvas.height / 2 + Math.sin(offsetAngle) * circleOne.radius

      ctx.beginPath();
      ctx.arc(pX, pY, circleOne.radius, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx.stroke()

      // console.log(offsetAngle)

      // Get distances between two circle radiuses

      ctx.beginPath();
      ctx.moveTo(canvas.width / 2, 0);
      ctx.lineTo(canvas.width / 2, canvas.height);
      ctx.closePath();

      // circleOne
      const cX = canvas.width / 2 + circleOne.x;
      const cY = canvas.height / 2 + circleOne.y;
      ctx.beginPath();
      ctx.arc(cX,cY, circleOne.radius, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx.stroke()

      // circleTwo
      const cX2 = canvas.width / 2 + circleTwo.x;
      const cY2 = canvas.height / 2 + circleTwo.y;
      ctx.beginPath();
      ctx.arc(cX2, cY2, circleTwo.radius, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx.stroke()


      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(0, canvas.height / 2);
      ctx.lineTo(canvas.width, canvas.height / 2);
      ctx.closePath();

      ctx.stroke();

      lastTime = now
      window.requestAnimationFrame(draw);
    }

    window.requestAnimationFrame(draw);
  </script>
</body>

</html>
